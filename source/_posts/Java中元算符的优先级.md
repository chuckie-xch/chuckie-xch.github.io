---
title: Java中元算符的优先级
date: 2017-12-21 14:20:31
tags: Java
icon: fa-superpowers 
---
# Java中运算符优先级

### 1. 问题引出

今天在写ArrayList的扩容时，遇到这么一个错误:

```java
int oldCapacity = elementData.length;
int newCapacity = oldCapacity + oldCapacity >> 1;
```

结果在执行的时候报了ArrayIndexOutOfBoundsException数组下标异常，通过debug发现newCapacity的值还是原来的值，发现是优先级导致的问题。**加减乘除**的优先级是高于**位移**运算符的。就此来回顾下Java中运算符优先级的问题。

### 2. 关于Java中的优先级

| 优先级  |         运算符          | 结合性  |
| :--: | :------------------: | :--: |
|  1   |         ()[]         | 从左到右 |
|  2   | ! + (正) -(负) ~ ++ -- | 从右向左 |
|  3   |        * / %         | 从左向右 |
|  4   |      +(加) -(减)       | 从左向右 |
|  5   |      << >> >>>       | 从左向右 |
|  6   | < <= > >= instanceof | 从左向右 |
|  7   |        == !=         | 从左向右 |
|  8   |        &(按位与)        | 从左向右 |
|  9   |          ^           | 从左向右 |
|  10  |          \|          | 从左向右 |
|  11  |          &&          | 从左向右 |
|  12  |         \|\|         | 从左向右 |
|  13  |          ?           | 从右向左 |
|  14  |    = += -+ *= /=     | 从右向左 |

口诀：

> 单目乘除为关系，逻辑三目后赋值。

单目：单目运算符+ –(负数) ++ -- 等 
乘除：算数单目运算符* / % + - 
为：位移单目运算符<< >> 
关系：关系单目运算符> < >= <= == != 
逻辑：逻辑单目运算符&& || & | ^ 
三目：三目单目运算符A > B ? X : Y 
后：无意义，仅仅为了凑字数 
赋值：赋值=

